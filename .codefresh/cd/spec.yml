version: '1.0'
kind: pipeline
metadata:
  name: cf-review-env-{{(ds "data").STAGE}}/cd
  project: cf-review-env-{{(ds "data").STAGE}}
spec:
  triggers:
    - name: FindHotel/cf-review-env
      type: git
      repo: FindHotel/cf-review-env
      events:
        - push.heads
      pullRequestAllowForkEvents: false
      commentRegex: /.*/gi
      branchRegex: /master/gi
      branchRegexInput: regex
      provider: github
      disabled: {{if eq (ds "data").STAGE "main"}}false{{else}}true{{end}}
      options:
        noCache: false
        noCfCache: false
        resetVolume: false
      verified: true
      context: github
      contexts: []
      variables: []
  steps: {}
  runtimeEnvironment:
    name: k8s-fh-ci-{{if eq (ds "data").STAGE "main"}}prd{{else}}stg{{end}}/codefresh
    cpu: 2000m
    memory: 4096Mi
    dindStorage: nullGi
  terminationPolicy:
    - event: onCreate
      type: branch
      ignoreTrigger: true
  stages: []
  variables: []
  contexts: []
  externalResources: []
  concurrency: 1
  triggerConcurrency: 1
  specTemplate:
    location: git
    repo: FindHotel/cf-review-env
    path: ./.codefresh/cd/pipeline.yml
    revision: ch20439
    context: github
